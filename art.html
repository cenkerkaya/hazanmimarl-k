<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hazan – Eser</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0f1115;--card:#171a21;--text:#e9eef6;--muted:#9aa4b2;--radius:16px}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#0f1115;color:var(--text);min-height:100vh;display:grid;place-items:center;padding:24px}
    .shell{width:min(960px,100%);background:#171a21;border:1px solid #272c38;border-radius:var(--radius);box-shadow:0 10px 40px rgba(0,0,0,.4);overflow:hidden}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:18px 22px;border-bottom:1px solid #232838}
    .id{color:#9aa4b2;font-size:14px}
    .media{display:grid;place-items:center;background:#0b0d12;aspect-ratio:16/9}
    .media img,.media video{max-width:100%;max-height:75vh;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.45)}
    .content{padding:22px;display:grid;gap:8px}
    h1{margin:0 0 4px 0;font-size:clamp(20px,2.2vw,28px)}
    .meta{color:#9aa4b2;font-size:14px}
    .desc{line-height:1.7;color:#cbd5e1;margin-top:6px}
    .oops{padding:28px;text-align:center}
    .oops a{color:#7aa2f7;text-decoration:none}
    .btn{border:1px solid #2a3142;background:#141823;color:#e9eef6;padding:10px 14px;border-radius:10px;font-size:14px;cursor:pointer}
    .actions{padding:8px 22px 22px;display:flex;gap:10px;flex-wrap:wrap}
  </style>
</head>
<body>
  <div class="shell" id="app">
    <header>
      <div>Hazan Architecture</div>
      <div class="id" id="idLabel"></div>
    </header>

    <div class="media" id="mediaArea" aria-live="polite"></div>

    <section class="content">
      <h1 id="title">Eser</h1>
      <div class="meta" id="meta"></div>
      <div class="desc" id="desc"></div>
      <div class="actions">
        <button class="btn" onclick="location.href='./index.html'">Ana Sayfa</button>
        <button class="btn" id="openOriginal" style="display:none">Orijinal Dosyayı Aç</button>
      </div>
    </section>
  </div>

  <script>
    /* ========= DATA =========
       Buraya yeni içerik ekledikçe QR'da id=... kısmını bu anahtarla eşleştir.
    */
    const DATA = {
      "organik-struktur": {
        type: "image",
        title: "Organik Strüktür",
        artist: "Hazan Mimarlık",
        year: "2025",
        src: "media/organik-struktur.jpg",
        desc: "Mavi ışık altında gerilmiş yüzeylerden oluşan organik mekânsal kurgu."
      },
      "isik-senaryosu": {
        type: "video",
        title: "Işık Senaryosu",
        artist: "Hazan Mimarlık",
        year: "2025",
        src: "media/isik-senaryosu.mp4",
        // poster: "media/isik-senaryosu-poster.jpg", // varsa aç
        autoplay: true, muted: true, loop: true, controls: true,
        desc: "Gece modu atmosferinin kısa kaydı."
      }
    };
    /* ======================== */

    const qs = new URLSearchParams(location.search);
    const id = qs.get("id");
    const app = document.getElementById("app");
    const mediaArea = document.getElementById("mediaArea");
    const idLabel = document.getElementById("idLabel");
    const titleEl = document.getElementById("title");
    const metaEl = document.getElementById("meta");
    const descEl = document.getElementById("desc");
    const openOriginalBtn = document.getElementById("openOriginal");

    function oops(){
      app.innerHTML = `<div class="oops">
        <h2>İçerik bulunamadı</h2>
        <p>URL’deki <code>id</code> geçersiz. QR kodu veya dosya adını kontrol edin.</p>
        <p><a href="./index.html">Ana sayfaya dön</a></p>
      </div>`;
    }

    (function main(){
      idLabel.textContent = id ? "ID: " + id : "ID yok";
      if (!id || !DATA[id]) return oops();

      const item = DATA[id];
      titleEl.textContent = item.title || "Eser";
      metaEl.textContent = [item.artist, item.year].filter(Boolean).join(" · ");
      descEl.textContent = item.desc || "";

      if (item.type === "video") {
        const v = document.createElement("video");
        v.controls = item.controls !== false;
        v.autoplay = !!item.autoplay;
        v.loop = !!item.loop;
        v.muted = !!item.muted;   // mobil autoplay için şart
        v.playsInline = true;     // iOS için
        if (item.poster) v.poster = item.poster;
        v.preload = "metadata";
        v.src = item.src;         // doğrudan src

        v.onerror = () => {
          mediaArea.innerHTML = `
            <div style="color:#cbd5e1;text-align:center;padding:16px">
              Video yüklenemedi. Dosya yolu ve kodeği kontrol edin.<br>
              <a href="${item.src}" target="_blank" style="color:#7aa2f7">Dosyayı doğrudan aç</a>
            </div>`;
        };

        mediaArea.replaceChildren(v);
      } else {
        const img = new Image();
        img.src = item.src;
        img.alt = item.title || "Eser";
        img.loading = "lazy";
        img.onerror = () => {
          mediaArea.innerHTML = `<div style="color:#cbd5e1;text-align:center;padding:16px">
            Görsel bulunamadı. Dosya adı ve yolu doğru mu?
          </div>`;
        };
        mediaArea.replaceChildren(img);
      }

      if (item.src) {
        openOriginalBtn.style.display = "inline-flex";
        openOriginalBtn.onclick = () => window.open(item.src, "_blank");
      }
    })();
  </script>
</body>
</html>
